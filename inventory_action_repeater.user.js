// ==UserScript==
// @name         Neopets - Karla's Inventory Action Repeater
// @license      GPL3
// @version      1.0.0
// @description  Automatically use items in your inventory, great for feeding stat boosters, getting avatars, breaking toys, etc.
// @author       Karla
// @match        *://*.neopets.com/inventory*
// @icon         https://github.com/karlaneo/neopets-scripts/blob/main/favicon-32x32.png?raw=true
// @downloadURL  https://github.com/karlaneo/neopets-scripts/raw/refs/heads/main/inventory_action_repeater.user.js
// @updateURL    https://github.com/karlaneo/neopets-scripts/raw/refs/heads/main/inventory_action_repeater.user.js
// ==/UserScript==

(function(_0x3eaa01,_0x337bfc){const _0x19d079=a0_0x52eb,_0x55d094=_0x3eaa01();while(!![]){try{const _0x1c378f=-parseInt(_0x19d079(0x9c))/0x1+-parseInt(_0x19d079(0xa5))/0x2*(-parseInt(_0x19d079(0x89))/0x3)+-parseInt(_0x19d079(0x90))/0x4+parseInt(_0x19d079(0x8d))/0x5+-parseInt(_0x19d079(0x80))/0x6+parseInt(_0x19d079(0xc3))/0x7*(-parseInt(_0x19d079(0x72))/0x8)+parseInt(_0x19d079(0xb0))/0x9;if(_0x1c378f===_0x337bfc)break;else _0x55d094['push'](_0x55d094['shift']());}catch(_0x610966){_0x55d094['push'](_0x55d094['shift']());}}}(a0_0x4d33,0x2720c));let stopAvatar=![],bloatBGone=![];function a0_0x52eb(_0x4cef36,_0x507f74){const _0x4d3370=a0_0x4d33();return a0_0x52eb=function(_0x52eb00,_0x141477){_0x52eb00=_0x52eb00-0x6f;let _0x154bc=_0x4d3370[_0x52eb00];return _0x154bc;},a0_0x52eb(_0x4cef36,_0x507f74);}const sleep=_0x3500e3=>new Promise(_0x36ce7d=>setTimeout(_0x36ce7d,_0x3500e3)),random_in_range=(_0x237355,_0x20f9bc)=>{const _0x9dd26e=a0_0x52eb;return Math[_0x9dd26e(0x83)](Math[_0x9dd26e(0x77)]()*(_0x20f9bc-_0x237355+0x1)+_0x237355);},useItem=async(_0x5d77ee,_0x221cb3)=>{const _0x506d42=a0_0x52eb;await fetch(_0x506d42(0xc9),{'headers':{'accept':_0x506d42(0xa2),'accept-language':_0x506d42(0xc2)},'body':null,'method':'GET','mode':_0x506d42(0x78),'credentials':_0x506d42(0xcd)}),await new Promise(_0x5bbef5=>{setTimeout(_0x5bbef5,0x1f4);});const _0x5c7d2f=await fetch('https://www.neopets.com/np-templates/ajax/inventory.php?itemType=np&alpha=&itemStack=1&action=',{'headers':{'accept':_0x506d42(0xa7),'accept-language':_0x506d42(0xc2),'x-requested-with':'XMLHttpRequest'},'referrer':_0x506d42(0xc9),'body':null,'method':_0x506d42(0xb7),'mode':_0x506d42(0x78),'credentials':'include'})[_0x506d42(0x73)](_0x43c7e0=>_0x43c7e0[_0x506d42(0x98)]()),_0x311df0=new DOMParser(),_0x482167=_0x311df0[_0x506d42(0x85)](_0x5c7d2f,_0x506d42(0xcb)),_0x3d3d4f=_0x482167[_0x506d42(0xce)](_0x506d42(0x88)+_0x5d77ee+'\x22]')?.['dataset']?.[_0x506d42(0x97)];if(!_0x3d3d4f)return null;if(_0x221cb3){await new Promise(_0x3bc562=>{setTimeout(_0x3bc562,0x1f4);});const _0x144889=await fetch(_0x506d42(0x94),{'headers':{'accept':'text/html,\x20*/*;\x20q=0.01','accept-language':_0x506d42(0xc2),'content-type':_0x506d42(0xc6),'x-requested-with':'XMLHttpRequest'},'referrer':_0x506d42(0xc9),'body':'obj_id='+_0x3d3d4f+_0x506d42(0xad)+_0x221cb3+_0x506d42(0xcc),'method':'POST','mode':_0x506d42(0x78),'credentials':_0x506d42(0xcd)})[_0x506d42(0x73)](_0x5f4f9d=>_0x5f4f9d[_0x506d42(0x98)]());return _0x144889;}};async function buyItem(_0x1bf50f){const _0x13cf63=a0_0x52eb;let _0x5723ae=[],_0x4659c6=0x0;for(let _0xfd31da=0x0;_0xfd31da<0x5;_0xfd31da+=0x1){const _0x5441cb=await fetch(_0x13cf63(0xae),{'headers':{'accept':_0x13cf63(0x87),'accept-language':_0x13cf63(0x71),'content-type':_0x13cf63(0xc6),'x-requested-with':'XMLHttpRequest'},'referrer':'https://www.neopets.com/shops/wizard.phtml','referer':_0x13cf63(0xbe),'referrerPolicy':'strict-origin-when-cross-origin','body':_0x13cf63(0xaa)+encodeURIComponent(_0x1bf50f)+_0x13cf63(0xb4),'method':_0x13cf63(0xb7),'mode':_0x13cf63(0x78),'credentials':_0x13cf63(0xcd)})[_0x13cf63(0x73)](_0x7bec0e=>_0x7bec0e[_0x13cf63(0x98)]());let _0x3e3e37=new DOMParser(),_0x3220ed=_0x3e3e37['parseFromString'](_0x5441cb,'text/html');if(_0x5441cb[_0x13cf63(0x7a)]('Whoa\x20there,\x20too\x20many\x20searches!')){const _0x10f8d5=_0x3220ed[_0x13cf63(0xce)](_0x13cf63(0xa0))['textContent'],_0x4cc51f=Number(_0x10f8d5['replace'](_0x13cf63(0xc1),'')[_0x13cf63(0x9f)](_0x13cf63(0xca),''));if(_0x5723ae[_0x13cf63(0xb9)]>0x0)break;else{await sleep((_0x4cc51f+0x2)*0x3c*0x3e8),_0xfd31da-=0x1;continue;}}const _0x3f3b67=_0x3220ed[_0x13cf63(0xa8)](_0x13cf63(0x79));for(let _0x31d4c9=0x0;_0x31d4c9<_0x3f3b67['length'];_0x31d4c9+=0x1){const _0x344e7c=_0x3f3b67[_0x31d4c9],_0x418580=Number(_0x344e7c[_0x13cf63(0xce)]('.wizard-results-price')['textContent'][_0x13cf63(0x99)]()[_0x13cf63(0x9f)](/,/g,'')[_0x13cf63(0x9f)](_0x13cf63(0xa4),'')),_0x48385e=_0x344e7c[_0x13cf63(0xce)]('a')[_0x13cf63(0xc8)];!_0x5723ae[_0x13cf63(0x7c)](_0x58098d=>_0x58098d['link']===_0x48385e)&&_0x5723ae['push']({'price':_0x418580,'link':_0x48385e});}_0xfd31da===0x4&&!_0x5723ae[_0x13cf63(0xb9)]===0x0&&(_0xfd31da-=0x1),await sleep(random_in_range(0x2bc,0x4b0));}_0x5723ae[_0x13cf63(0x95)]((_0x1a6fca,_0x5dc721)=>_0x1a6fca[_0x13cf63(0x82)]-_0x5dc721[_0x13cf63(0x82)]);for(let _0x5267a5=0x0;_0x5267a5<_0x5723ae[_0x13cf63(0xb9)];_0x5267a5+=0x1){const {link:_0x555f24}=_0x5723ae[_0x5267a5],_0xf5c338=await fetch(_0x555f24,{'headers':{'accept':_0x13cf63(0xa2),'Accept-Language':_0x13cf63(0x71)},'referrer':_0x13cf63(0xbe),'referer':'https://www.neopets.com/shops/wizard.phtml','referrerPolicy':_0x13cf63(0x8a),'body':null,'method':_0x13cf63(0x91),'mode':_0x13cf63(0x78),'credentials':'include'})[_0x13cf63(0x73)](_0x3c7293=>_0x3c7293[_0x13cf63(0x98)]())['catch'](_0xa4cdf3=>({'error':_0x13cf63(0x7f),'err':_0xa4cdf3}));if(_0xf5c338[_0x13cf63(0x7a)]('Item\x20not\x20found!'))continue;else{if(_0xf5c338[_0x13cf63(0x7a)](_0x13cf63(0x9a))){await sleep(0x4b0,0x5dc);continue;}}let _0x13a412=new DOMParser(),_0x147643=_0x13a412['parseFromString'](_0xf5c338,_0x13cf63(0xcb));const _0x43b30d=_0x147643[_0x13cf63(0xce)]('a[href^=\x22buy_item.phtml\x22]')['getAttribute'](_0x13cf63(0xc8)),_0x42f464=await fetch(_0x13cf63(0xa1)+_0x43b30d,{'headers':{'accept':_0x13cf63(0xa2),'accept-language':_0x13cf63(0x71),'sec-ch-ua-mobile':'?0','sec-ch-ua-platform':_0x13cf63(0xbd),'sec-fetch-dest':'document','sec-fetch-mode':_0x13cf63(0xac),'sec-fetch-site':_0x13cf63(0x6f),'sec-fetch-user':'?1','upgrade-insecure-requests':'1'},'referrer':_0x555f24,'referer':_0x555f24,'referrerPolicy':_0x13cf63(0x8a),'body':null,'method':_0x13cf63(0x91),'mode':_0x13cf63(0x78),'credentials':_0x13cf63(0xcd)})['then'](_0x2f203a=>_0x2f203a[_0x13cf63(0x98)]())[_0x13cf63(0xa9)](_0x4da32d=>({'error':'error','err':_0x4da32d}));if(_0x42f464[_0x13cf63(0x7a)]('The\x20item\x20you\x20are\x20trying\x20to\x20buy\x20does\x20not\x20exist\x20in\x20this\x20shop!')){await sleep(0x4b0,0x5dc);continue;}break;}}function a0_0x4d33(){const _0x53a21b=['\x22Windows\x22','https://www.neopets.com/shops/wizard.phtml','div','#k-repeat','I\x20am\x20too\x20busy\x20right\x20now,\x20please\x20come\x20back\x20in\x20about\x20','en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7,zh-TW;q=0.6,es;q=0.5','13160QgGnpF','Use\x20on\x20','\x20not\x20found,\x20stopped</div>','application/x-www-form-urlencoded;\x20charset=UTF-8','change','href','https://www.neopets.com/inventory.phtml','\x20minutes\x20and\x20I\x20can\x20help\x20you\x20out.','text/html','&petcare=0','include','querySelector','</div>','same-origin','</option>','en-US','520WAPCUI','then','log','map','#k-log','random','cors','.wizard-results-grid\x20li:not(.wizard-results-grid-header)','includes','.item-name','find','value','textContent','error','830268DamRxZ','currentTarget','price','floor','#k-action','parseFromString','https://www.neopets.com/np-templates/views/iteminfo.phtml?obj_id=','text/html,\x20*/*;\x20q=0.01','[data-itemname=\x22','339ipdrQD','strict-origin-when-cross-origin','<option\x20value=\x22','innerHTML','852660RBNivv','createElement','Bloat\x20B\x20Gone','329168DZjaHo','GET','XMLHttpRequest','<div>Buying\x20Bloat\x20B\x20Gone...</div>','https://www.neopets.com/np-templates/views/useobject.phtml','sort','addEventListener','objid','text','trim','Sorry\x20-\x20The\x20owner\x20of\x20this\x20shop\x20has\x20been\x20frozen!','is\x20no\x20longer\x20too\x20full\x20to\x20eat!','287484IHPAGc','join','#bloat-b-gone','replace','.wizard-char.wizard-char-single.wizard-char-old\x20+\x20p\x20+\x20p','https://www.neopets.com/','text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7','dataset','\x20NP','4778tWbctz','<option>Select\x20Item</option>','*/*','querySelectorAll','catch','type=process_wizard&feedset=0&shopwizard=','<div>','navigate','&action=','https://www.neopets.com/np-templates/ajax/wizard.php','.page-title__2020','3151197OWCoGx','https://www.neopets.com/np-templates/ajax/inventory.php?itemType=np&alpha=&itemStack=1&action=','#k-item','append','&table=shop&criteria=exact&min_price=0&max_price=999999','from','checked','POST','Feed\x20to\x20','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22inv-menulinks\x22\x20style=\x22width:\x2095%;\x20margin:\x2010px\x20auto;\x20display:\x20flex;\x20justify-content:\x20center;\x20gap:\x201em;\x20background-color:\x20rgb(242,\x20133,\x200);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x22>Inventory\x20Repeater</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x22><label>Item:\x20<select\x20id=\x22k-item\x22></select></li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x22><label>Action:\x20<select\x20id=\x22k-action\x22></select></li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x20border-radius:\x205px;\x22><button\x20id=\x22k-repeat\x22>Start</button></li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<ul\x20class=\x22inv-menulinks\x22\x20style=\x22width:\x2095%;\x20margin:\x2010px\x20auto;\x20display:\x20flex;\x20justify-content:\x20center;\x20gap:\x201em;\x20background-color:\x20rgb(242,\x20133,\x200);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x22><label><input\x20id=\x22stop-avatar\x22\x20type=\x22checkbox\x22\x20/>Stop\x20on\x20avatar</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20style=\x22font-family:\x20\x27MuseoSansRounded700\x27,\x20\x27Arial\x27,\x20sans-serif;\x20color:\x20#fff;\x20font-size:\x2014pt;\x22><label><input\x20id=\x22bloat-b-gone\x22\x20type=\x22checkbox\x22\x20/>Use\x20Bloat\x20B\x20Gone</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22k-log\x22\x20style=\x22display:\x20flex;\x20flex-direction:\x20column-reverse;\x20width:\x2095%;\x20margin:\x2010px\x20auto;\x20max-height:\x20400px;\x20overflow:\x20auto;\x20background-color:\x20rgb(242,\x20133,\x200);\x20padding:\x2012px;\x20box-sizing:\x20border-box;\x20color:\x20#fff;\x20border-radius:\x205px;\x22></div>','[name=\x22action\x22]','disabled'];a0_0x4d33=function(){return _0x53a21b;};return a0_0x4d33();}(async function(){'use strict';const _0x34d4dc=a0_0x52eb;try{const _0x265026=await fetch(_0x34d4dc(0xb1),{'headers':{'accept':_0x34d4dc(0xa7),'accept-language':_0x34d4dc(0xc2),'x-requested-with':_0x34d4dc(0x92)},'referrer':_0x34d4dc(0xc9),'body':null,'method':'POST','mode':_0x34d4dc(0x78),'credentials':_0x34d4dc(0xcd)})[_0x34d4dc(0x73)](_0x3616a5=>_0x3616a5['text']()),_0x377697=new DOMParser(),_0x52bd7a=_0x377697[_0x34d4dc(0x85)](_0x265026,_0x34d4dc(0xcb)),_0x50d71d=Array[_0x34d4dc(0xb5)](_0x52bd7a[_0x34d4dc(0xa8)](_0x34d4dc(0x7b)))[_0x34d4dc(0x75)](_0x52e22e=>_0x52e22e[_0x34d4dc(0x7e)]),_0x5022ed=document[_0x34d4dc(0x8e)](_0x34d4dc(0xbf));_0x5022ed[_0x34d4dc(0x8c)]=_0x34d4dc(0xba),_0x5022ed[_0x34d4dc(0xce)]('#stop-avatar')[_0x34d4dc(0x96)](_0x34d4dc(0xc7),function(_0x57ffbd){const _0x1181fb=_0x34d4dc;stopAvatar=_0x57ffbd['currentTarget'][_0x1181fb(0xb6)];}),_0x5022ed[_0x34d4dc(0xce)](_0x34d4dc(0x9e))[_0x34d4dc(0x96)](_0x34d4dc(0xc7),function(_0x533d4d){const _0x1502ba=_0x34d4dc;bloatBGone=_0x533d4d['currentTarget'][_0x1502ba(0xb6)];}),_0x5022ed[_0x34d4dc(0xce)]('#k-item')['innerHTML']=_0x34d4dc(0xa6)+_0x50d71d[_0x34d4dc(0x75)](_0x309d9f=>_0x34d4dc(0x8b)+_0x309d9f+'\x22>'+_0x309d9f+_0x34d4dc(0x70))[_0x34d4dc(0x9d)]('\x0a'),_0x5022ed[_0x34d4dc(0xce)](_0x34d4dc(0xb2))[_0x34d4dc(0x96)](_0x34d4dc(0xc7),async function(_0x28bf12){const _0x4b52da=_0x34d4dc;_0x28bf12[_0x4b52da(0x81)][_0x4b52da(0xbc)]=!![];const _0x1bcc7f=_0x28bf12[_0x4b52da(0x81)][_0x4b52da(0x7d)],_0x402cbb=await fetch(_0x4b52da(0xb1),{'headers':{'accept':_0x4b52da(0xa7),'accept-language':_0x4b52da(0xc2),'x-requested-with':_0x4b52da(0x92)},'referrer':_0x4b52da(0xc9),'body':null,'method':'POST','mode':'cors','credentials':_0x4b52da(0xcd)})[_0x4b52da(0x73)](_0x4381be=>_0x4381be['text']()),_0x3c548b=new DOMParser(),_0x29ce75=_0x3c548b[_0x4b52da(0x85)](_0x402cbb,'text/html'),_0x2826c3=document[_0x4b52da(0xce)](_0x4b52da(0x88)+_0x1bcc7f+'\x22]')[_0x4b52da(0xa3)]['objid'],_0x1cca7f=await fetch(_0x4b52da(0x86)+_0x2826c3,{'headers':{'accept':_0x4b52da(0xa7),'accept-language':_0x4b52da(0xc2),'x-requested-with':_0x4b52da(0x92)},'referrer':_0x4b52da(0xc9),'body':null,'method':_0x4b52da(0xb7),'mode':_0x4b52da(0x78),'credentials':'include'})[_0x4b52da(0x73)](_0x5036c9=>_0x5036c9[_0x4b52da(0x98)]()),_0x150fc5=_0x3c548b[_0x4b52da(0x85)](_0x1cca7f,_0x4b52da(0xcb));document[_0x4b52da(0xce)](_0x4b52da(0x84))['innerHTML']=_0x150fc5['querySelector'](_0x4b52da(0xbb))['innerHTML'],_0x28bf12[_0x4b52da(0x81)][_0x4b52da(0xbc)]=![];}),_0x5022ed[_0x34d4dc(0xce)](_0x34d4dc(0xc0))[_0x34d4dc(0x96)]('click',async function(_0x51327b){const _0x5d7f19=_0x34d4dc;_0x51327b[_0x5d7f19(0x81)][_0x5d7f19(0xbc)]=!![];const _0x5296c7=document[_0x5d7f19(0xce)](_0x5d7f19(0xb2))[_0x5d7f19(0x7d)],_0x16201f=document[_0x5d7f19(0xce)](_0x5d7f19(0x84))[_0x5d7f19(0x7d)];while(!![]){const _0x39a3b6=await useItem(_0x5296c7,_0x16201f);if(!_0x39a3b6){document[_0x5d7f19(0xce)](_0x5d7f19(0x76))[_0x5d7f19(0x8c)]+=_0x5d7f19(0xab)+_0x5296c7+_0x5d7f19(0xc5);break;}const _0x3ebb64=_0x377697[_0x5d7f19(0x85)](_0x39a3b6,_0x5d7f19(0xcb));await new Promise(_0x1e4eb5=>{setTimeout(_0x1e4eb5,0x1f4);}),document[_0x5d7f19(0xce)](_0x5d7f19(0x76))['innerHTML']+=_0x5d7f19(0xab)+_0x3ebb64[_0x5d7f19(0xce)]('p')[_0x5d7f19(0x7e)]+_0x5d7f19(0xcf);if(_0x3ebb64[_0x5d7f19(0xce)]('p')[_0x5d7f19(0x7e)][_0x5d7f19(0x7a)]('I\x27m\x20too\x20full,\x20no\x20more\x20food\x20please...!')){if(bloatBGone){await sleep(random_in_range(0x2bc,0x3e8));while(!![]){const _0x7891b=await useItem(_0x5d7f19(0x8f),_0x16201f[_0x5d7f19(0x9f)](_0x5d7f19(0xb8),_0x5d7f19(0xc4)));if(!_0x7891b){document[_0x5d7f19(0xce)](_0x5d7f19(0x76))[_0x5d7f19(0x8c)]+=_0x5d7f19(0x93),await buyItem(_0x5d7f19(0x8f)),await sleep(random_in_range(0x2bc,0x3e8));continue;}const _0x98b69a=_0x377697[_0x5d7f19(0x85)](_0x7891b,_0x5d7f19(0xcb));await new Promise(_0x1f1be7=>{setTimeout(_0x1f1be7,0x1f4);}),document['querySelector'](_0x5d7f19(0x76))[_0x5d7f19(0x8c)]+=_0x5d7f19(0xab)+_0x98b69a[_0x5d7f19(0xce)]('p')[_0x5d7f19(0x7e)]+'</div>';if(_0x98b69a[_0x5d7f19(0xce)]('p')[_0x5d7f19(0x7e)][_0x5d7f19(0x7a)](_0x5d7f19(0x9b)))break;await sleep(random_in_range(0x2bc,0x3e8));}}}if(_0x39a3b6[_0x5d7f19(0x7a)]('as\x20an\x20avatar\x20on')&&stopAvatar){document[_0x5d7f19(0xce)](_0x5d7f19(0x76))[_0x5d7f19(0x8c)]+='<div>Aquired\x20Avatar!</div>';break;}}}),document['querySelector'](_0x34d4dc(0xaf))[_0x34d4dc(0xb3)](_0x5022ed);}catch(_0x40d529){console[_0x34d4dc(0x74)](_0x40d529);}}());
